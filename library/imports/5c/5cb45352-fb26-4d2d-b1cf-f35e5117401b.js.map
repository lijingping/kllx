{"version":3,"sources":["assets/Script/GameMenu.js"],"names":["Utils","require","ShareSdk","RankList","cc","Class","Component","properties","m_sp_logo","Node","m_l_maingold","Label","m_sp_off","m_spa_list","SpriteAtlas","m_sp_mystepicon","Sprite","m_l_mystepname","m_n_starlist","type","m_n_skinpanel","m_n_moregame","onLoad","window","GAME_MENU","setDesignResolution","start","EVENT_LISTENER","on","GAME_UPDATE_DATA","updateGold","string","INIT_GAME_SAVE_DATA","gold_num","showGameClubButton","updateMusicBtnSprite","MUSIC_SHOW_OFF","setScore","top_score","wx","showShareMenu","withShareTicket","onShareAppMessage","title","imageUrl","tempFileURL","showAdBanner","SHOWNEWYEAR","NEWYEAR","loadRes","Prefab","obj","node","instantiate","zIndex","parent","playBgmMusic","BGM","initMyData","active","MOVEGAME","setInterval","getdata","setSaveData","playmuisc","curlv","top_level","data","getMyStepData","spriteFrame","getSpriteFrame","icon_path","desc","i","length","star","STEP_CONFIG","getComponent","initData","lv","index","Math","floor","onStartGame","SetSoundEffect","BUTTON_CLICK_MUSIC","director","loadScene","GAME_SCENE_NAME","onCloseShare","onShareStart","self","shareAppMessage","success","res","fail","err","complate","msg","onOpenSkinPanel","onOpenStepRank","isWeChatPlatform","showLoading","STEP_SCENE_NAME","hideLoading","onMusicBtnClick","stopBgmMusic","sys","localStorage","setItem","show_off","onShare","console","log","onMoreGame","navigateToMiniProgram","appId","complete","wxShortCut","showModal","clubbutton","createGameClubButton","icon","style","left","top","width","height","show","hideGameClubButton","hide","onDestroy","destroy","m_bannerad","off","boo","Size","winSize","Widthnode","find","pos","convertToWorldSpace","y","system","getSystemInfoSync","adaptScaleH","screenHeight","PosY","SDKVersion","showToast","image","duration","setTimeout","hideToast","createBannerAd","adUnitId","screenWidth","onResize","res1","error","then","onError"],"mappings":"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","sourceRoot":"/","sourcesContent":["var Utils = require(\"Utils\");\nvar ShareSdk = require(\"ShareSdk\");\nvar RankList = require(\"RankList\");\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        m_sp_logo: cc.Node,\n        m_l_maingold: cc.Label,\n        m_sp_off: cc.Node,\n        m_spa_list: cc.SpriteAtlas,\n        m_sp_mystepicon: cc.Sprite,\n        m_l_mystepname: cc.Label,\n        m_n_starlist: { type: cc.Node, default: [] },\n        m_n_skinpanel: cc.Node,\n        m_n_moregame: cc.Node,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad() {\n        window.GAME_MENU = this;\n        Utils.setDesignResolution();\n    },\n\n    start() {\n        // this.m_sp_logo.runAction(cc.repeatForever(cc.sequence(cc.moveBy(1, 0, 15), cc.moveBy(1, 0, -15))));\n        EVENT_LISTENER.on(window.GAME_UPDATE_DATA, this.updateGold, this);\n        this.m_l_maingold.string = window.INIT_GAME_SAVE_DATA.gold_num;\n        this.showGameClubButton();\n\n        this.updateMusicBtnSprite(window.MUSIC_SHOW_OFF);\n        RankList.setScore(window.INIT_GAME_SAVE_DATA.top_score);\n        if (typeof (wx) != \"undefined\") {\n            wx.showShareMenu({\n                withShareTicket: true,\n            });\n            wx.onShareAppMessage(() => {\n                return {\n                    title: \"好玩又新奇，消磨时间好帮手\",\n                    imageUrl: window.tempFileURL[1],\n                }\n            });\n        }\n\n        this.showAdBanner(true);\n        if (!window.SHOWNEWYEAR && window.NEWYEAR) {\n            Utils.loadRes(\"prefabs/happynewyear\", cc.Prefab, (obj) => {\n                let node = cc.instantiate(obj);\n                node.zIndex = 1 << 10;\n                node.parent = this.node;\n                window.SHOWNEWYEAR = true;\n            })\n        } else {\n            Utils.playBgmMusic(window.BGM, 0.5);\n        }\n        this.initMyData();\n        this.m_n_moregame.active = window.MOVEGAME;\n        \n        setInterval(()=>{\n            if (window.getdata) {\n                window.Utils.setSaveData();\n            }\n        }, 6000);\n    },\n\n    playmuisc() {\n        Utils.playBgmMusic(window.BGM, 0.5);\n    },\n\n    initMyData() {\n        let curlv = window.INIT_GAME_SAVE_DATA.top_level;\n        let data = this.getMyStepData(curlv);\n        if (data) {\n            this.m_sp_mystepicon.spriteFrame = this.m_spa_list.getSpriteFrame(data.icon_path);\n            this.m_l_mystepname.string = data.desc;\n            for (let i = 0; i < this.m_n_starlist.length; i++) {\n                this.m_n_starlist[i].active = i < data.star;\n            }\n        } else {\n            this.m_sp_mystepicon.spriteFrame = this.m_spa_list.getSpriteFrame(\"stepicon6\");\n            this.m_l_mystepname.string = window.STEP_CONFIG[0].desc;\n            for (let i = 0; i < this.m_n_starlist.length; i++) {\n                this.m_n_starlist[i].active = i < 3;\n            }\n        }\n\n        this.m_n_skinpanel.getComponent(\"SkinPanel\").initData();\n    },\n\n    getMyStepData(lv) {\n        let index = Math.floor(lv / 10);\n        if (index <= 0) {\n            return null;\n        } else {\n            if (index > window.STEP_CONFIG.length)\n                index = window.STEP_CONFIG.length;\n            return window.STEP_CONFIG[index - 1];\n        }\n    },\n\n    updateGold() {\n        this.m_l_maingold.string = window.INIT_GAME_SAVE_DATA.gold_num;\n    },\n\n    onStartGame() {\n        Utils.SetSoundEffect(window.BUTTON_CLICK_MUSIC, false, 1);\n        cc.director.loadScene(window.GAME_SCENE_NAME);\n    },\n\n    onCloseShare() {\n        cc.director.loadScene(window.GAME_SCENE_NAME);\n    },\n\n    onShareStart() {\n        let self = this;\n        Utils.SetSoundEffect(window.BUTTON_CLICK_MUSIC, false, 1);\n        ShareSdk.shareAppMessage({\n            title: \"来助力我一起打怪兽吧\",\n            imageUrl: window.tempFileURL[1],\n            success: res => {\n                cc.director.loadScene(window.GAME_SCENE_NAME);\n            },\n            fail: err => {\n\n            },\n            complate: msg => {\n\n            },\n        });\n    },\n\n    onOpenSkinPanel() {\n        this.m_n_skinpanel.active = true;\n    },\n\n    onOpenStepRank() {\n        Utils.SetSoundEffect(window.BUTTON_CLICK_MUSIC, false, 1);\n        if (window.isWeChatPlatform)\n            wx.showLoading({ title: \"加载中...\" });\n        cc.director.loadScene(window.STEP_SCENE_NAME, () => {\n            if (window.isWeChatPlatform)\n                wx.hideLoading();\n        })\n    },\n\n    onMusicBtnClick() {\n        if (window.MUSIC_SHOW_OFF == 1) {\n            window.MUSIC_SHOW_OFF = 0;\n            Utils.stopBgmMusic();\n            cc.sys.localStorage.setItem('music', '0');\n        }\n        else {\n            window.MUSIC_SHOW_OFF = 1;\n            Utils.playBgmMusic(window.BGM, 0.5);\n            cc.sys.localStorage.setItem('music', '1');\n        }\n        this.updateMusicBtnSprite(window.MUSIC_SHOW_OFF);\n    },\n\n\n    updateMusicBtnSprite(show_off) {\n        if (show_off == 1) {\n            this.m_sp_off.active = false;\n        } else {\n            this.m_sp_off.active = true;\n        }\n    },\n\n    onShare() {\n        Utils.SetSoundEffect(window.BUTTON_CLICK_MUSIC, false, 1);\n        // console.log(cc.url.raw(\"resources/common/sharepic.85663.png\"));\n        ShareSdk.shareAppMessage({\n            title: \"今年最好玩最刺激的六边形快乐连消游戏，快来尝试下\",\n            imageUrl: window.tempFileURL[1],\n            success: res => {\n                console.log(\"res\", res)\n            },\n            fail: err => {\n                console.log(\"res-err\")\n            },\n            complate: msg => {\n                console.log(\"complate\")\n            },\n        });\n    },\n\n    onMoreGame() {\n        if (typeof (wx) != 'undefined' && wx.navigateToMiniProgram) {\n            wx.navigateToMiniProgram({\n                appId: \"wx7109309214f4c86e\",\n                //target: \"wx6ee9cae077851dfa\",\n                success: res => {\n                    console.log('跳转成功');\n                    // successs && successs(res);\n                },\n                fail: err => {\n                    console.log(\"跳转失败：\", err);\n                    // faill && faill(err);\n                },\n                complete: res => {\n                    console.log('跳转完成')\n                    // completee && completee(res);\n                }\n            });\n        } else {\n            wxShortCut.showModal(\"提示\", \"暂未开放\");\n        }\n    },\n\n    showGameClubButton() {\n        if (typeof (wx) != 'undefined') {\n            if (!this.clubbutton) {\n                this.clubbutton = wx.createGameClubButton({\n                    icon: 'light',\n                    style: {\n                        left: 10,\n                        top: 300,\n                        width: 40,\n                        height: 40\n                    }\n                });\n            }\n            this.clubbutton.show();\n        }\n    },\n    hideGameClubButton() {\n        if (this.clubbutton) {\n            this.clubbutton.hide();\n        }\n    },\n\n    onDestroy() {\n        if (this.clubbutton) {\n            this.clubbutton.destroy();\n            this.clubbutton = null;\n        }\n        if (this.m_bannerad) {\n            this.m_bannerad.destroy();\n            this.m_bannerad = null;\n        }\n        EVENT_LISTENER.off(window.GAME_UPDATE_DATA, this);\n        window.GAME_MENU = null;\n    },\n\n    showAdBanner(boo) {\n        if (typeof (wx) == 'undefined') return;\n        let Size = cc.winSize\n\n        let Widthnode = cc.find(\"Canvas/n_funnymap/n_bannerpos\");\n        var pos = this.node.convertToWorldSpace(Widthnode);\n\n        if (Size.height / Size.width > 2) {//适配全面屏 适用于FIXHeight\n            pos.y += (Size.height - 1920) / 2;\n        }\n\n        let system = wx.getSystemInfoSync();\n\n        let adaptScaleH = system.screenHeight / Size.height;\n        var PosY = ((Size.height - pos.y) * adaptScaleH);\n\n        let self = this;\n        if (!boo) {\n            if (this.m_bannerad) {\n                this.m_bannerad.hide();\n            }\n        } else {\n            if (this.m_bannerad)\n                this.m_bannerad.show();\n        }\n        if (!this.m_bannerad && boo) {\n            if (system.SDKVersion < '2.0.4') {\n                wx.showToast({\n                    title: \"微信版本过低，无法创建广告banner\",\n                    icon: \"none\",\n                    image: \"\",\n                    duration: 0,\n                });\n                setTimeout(() => wx.hideToast(), 3000);\n            } else {\n                self.m_bannerad = wx.createBannerAd({\n                    adUnitId: 'adunit-9dd057b6b514245a',\n                    style: {\n                        left: 0,\n                        top: PosY,\n                        width: system.screenWidth,\n                    }\n                })\n                self.m_bannerad.onResize((res1) => {\n                    try {\n                        if (self.m_bannerad && self.m_bannerad.style) {\n\n                            self.m_bannerad.style.top = PosY;\n                            self.m_bannerad.style.height = res1.height;\n                        }\n                    } catch (error) {\n                        console.log(\"onResize-error\", error);\n                    }\n                });\n                self.m_bannerad.onLoad(() => {\n                    console.log('banner 广告加载成功')\n\n                })\n                self.m_bannerad.show().then(() => {\n                    console.log(\"广告显示成功\");\n                }).catch((err) => {\n                    console.error(\"广告加载失败\", err);\n                })\n                self.m_bannerad.onError(err => {\n                    console.error(err)\n                })\n\n            }\n        }\n    },\n});\n"]}