{"version":3,"sources":["assets/Script/common/event_listener.js"],"names":["EventListenr","obj","that","on","name","method","target","hasOwnProperty","handler","func","push","fire","handlerList","i","length","args","j","arguments","apply","trace","off","splice"],"mappings":";;;;;;;;;AAAA,IAAMA,YAAY,GAAG,SAAfA,YAAe,CAAUC,GAAV,EAAe;AAChC,MAAIC,IAAI,GAAG,EAAX;;AACAD,EAAAA,GAAG,CAACE,EAAJ,GAAS,UAAUC,IAAV,EAAgBC,MAAhB,EAAwBC,MAAxB,EAAgC;AACrC,QAAI,CAACJ,IAAI,CAACK,cAAL,CAAoBH,IAApB,CAAL,EAAgC;AAC5BF,MAAAA,IAAI,CAACE,IAAD,CAAJ,GAAa,EAAb;AACH;;AACD,QAAII,OAAO,GAAG,EAAd;AACAA,IAAAA,OAAO,CAACC,IAAR,GAAeJ,MAAf;AACAG,IAAAA,OAAO,CAACF,MAAR,GAAiBA,MAAjB;AAEAJ,IAAAA,IAAI,CAACE,IAAD,CAAJ,CAAWM,IAAX,CAAgBF,OAAhB,EARqC,CASrC;AACH,GAVD;;AAWAP,EAAAA,GAAG,CAACU,IAAJ,GAAW,UAAUP,IAAV,EAAgB;AACvB,QAAIF,IAAI,CAACK,cAAL,CAAoBH,IAApB,CAAJ,EAA+B;AAC3B,UAAIQ,WAAW,GAAGV,IAAI,CAACE,IAAD,CAAtB;;AACA,WAAK,IAAIS,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,WAAW,CAACE,MAAhC,EAAwCD,CAAC,EAAzC,EAA6C;AACzC,YAAIL,OAAO,GAAGI,WAAW,CAACC,CAAD,CAAzB;AACA,YAAIE,IAAI,GAAG,EAAX;;AACA,aAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,SAAS,CAACH,MAA9B,EAAsCE,CAAC,EAAvC,EAA2C;AACvCD,UAAAA,IAAI,CAACL,IAAL,CAAUO,SAAS,CAACD,CAAD,CAAnB;AACH;;AACD,YAAIR,OAAO,CAACC,IAAZ,EACID,OAAO,CAACC,IAAR,CAAaS,KAAb,CAAmBV,OAAO,CAACF,MAA3B,EAAmCS,IAAnC,EADJ,KAGII,KAAK,CAAC,0BAA0Bf,IAA3B,CAAL;AAEP;AACJ;AACJ,GAhBD;;AAiBAH,EAAAA,GAAG,CAACmB,GAAJ,GAAU,UAAUhB,IAAV,EAAeE,MAAf,EAAuB;AAC7B;AACA,QAAIJ,IAAI,CAACK,cAAL,CAAoBH,IAApB,CAAJ,EAA+B;AAC3B,UAAIQ,WAAW,GAAGV,IAAI,CAACE,IAAD,CAAtB,CAD2B,CAE3B;;AACA,WAAK,IAAIS,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,WAAW,CAACE,MAAhC,EAAwCD,CAAC,EAAzC,EAA6C;AACzC,YAAIL,OAAO,GAAGI,WAAW,CAACC,CAAD,CAAzB;;AACA,YAAGL,OAAO,CAACF,MAAR,KAAmBA,MAAtB,EAA6B;AACzB;AACAM,UAAAA,WAAW,CAACS,MAAZ,CAAmBR,CAAnB,EAAqB,CAArB;AACH;AACJ;AACJ;AACJ,GAbD;;AAcA,SAAOZ,GAAP;AACH,CA7CD;;eA8CeD","sourceRoot":"/","sourcesContent":["const EventListenr = function (obj) {\n    let that = {};\n    obj.on = function (name, method, target) {\n        if (!that.hasOwnProperty(name)) {\n            that[name] = [];\n        }\n        var handler = {};\n        handler.func = method;\n        handler.target = target;\n        \n        that[name].push(handler);\n        // console.log(\"global on-\",name, that);\n    };\n    obj.fire = function (name) {\n        if (that.hasOwnProperty(name)) {\n            let handlerList = that[name];\n            for (let i = 0; i < handlerList.length; i++) {\n                let handler = handlerList[i];\n                let args = [];\n                for (let j = 1; j < arguments.length; j++) {\n                    args.push(arguments[j]);\n                }\n                if (handler.func)\n                    handler.func.apply(handler.target, args);\n                else\n                    trace(\"[Warn] 没有对应的回调事件类型 - \" + name)\n\n            }\n        }\n    };\n    obj.off = function (name,target) {\n        // console.log(\"try to off \"+ name, that)\n        if (that.hasOwnProperty(name)) {\n            let handlerList = that[name];\n            // console.log(\"try to off \"+ name + \"have num\"+handlerList.length);\n            for (let i = 0; i < handlerList.length; i++) {\n                let handler = handlerList[i]\n                if(handler.target === target){\n                    // console.log(\"delete -\" + target + name);\n                    handlerList.splice(i,1);\n                }\n            }\n        }\n    };\n    return obj;\n};\nexport default EventListenr;"]}