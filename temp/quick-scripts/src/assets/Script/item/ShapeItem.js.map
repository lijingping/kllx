{"version":3,"sources":["assets/Script/item/ShapeItem.js"],"names":["Utils","require","GameMain","scaleParam","colorlist","cc","Class","Component","properties","m_spa_blocklist","SpriteAtlas","GameLayer","type","start","_bg_color","_type_index","_colorindex","window","INIT_GAME_SAVE_DATA","top_level","GUIDE_LEVEL","resetBlock","showGuide","addTouchEvent","_blockcount","updateIndex","boo","indexlist","skin","i","length","_data","SKIN_CONFIG","node","getChildByName","childrenCount","children","getComponent","Sprite","spriteFrame","getSpriteFrame","name","getTheConfig","a","h","height","cos60","Math","cos","PI","sin60","sin","cos120","sin120","cos300","sin300","configLists","v2","newOneK","colorIndex","Node","colorName","sprite","addComponent","getCurColorIndex","createItem","index","_next","shapeitem","config","randomIndex","random","posList","randomIndexColor","sumX","countX","sumY","countY","pos","kuai","x","y","addChild","setScale","upH","self","ox","oy","on","EventType","TOUCH_START","SetSoundEffect","BUTTON_CLICK_MUSIC","TOUCH_MOVE","event","delta","touch","getDelta","collisionFunc","checkIsCanDrop","changeColorDeal","TOUCH_CANCEL","dropDownFunc","TOUCH_END","_checkFrameList","isHaveFK","isJustClearColor","m_maparray","setBrightVisible","_checkFKlist","pianyiCPos","add","childPos","position","frame","checkPosFunc","push","len","frameNode","dis","sub","mag","takeBack","parent","runAction","sequence","scaleTo","hideGuide","removeAllChildren","oneNode","addScore","checkClearUp","checkIsLose","checkFrameList","canDropCount","srcPos","count","j","k","tFrameNode","setNextBlock"],"mappings":"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","sourceRoot":"/","sourcesContent":["let Utils = require(\"Utils\");\nconst GameMain = require('GameMain')\nconst scaleParam = 0.5;\nvar colorlist = ['#ffffff', '#f9bd1d', '#003DFF', '#85d546', '#D6309A'];\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        m_spa_blocklist: cc.SpriteAtlas,\n        GameLayer: {\n            default: null,\n            type: GameMain\n        }\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {},\n\n    start() {\n        this._bg_color = 0;\n        this._type_index = 0;\n        this._colorindex = 1;\n        // this.updateIndex();\n        if (window.INIT_GAME_SAVE_DATA.top_level < 1 && !window.GUIDE_LEVEL) { //showguai\n            this.resetBlock(22);\n            this.GameLayer.showGuide();\n        } else {\n            this.resetBlock()\n        }\n        // let oneNode = this.createItem();\n        // this.node.addChild(oneNode);\n        this.addTouchEvent();\n        this._blockcount = 0; //5个循环，5个之后必定出现一个单个的\n    },\n\n    updateIndex(boo) {\n        let indexlist = window.INIT_GAME_SAVE_DATA.skin;\n        for (let i = 0; i < indexlist.length; i++) {\n            if (indexlist[i] >= 2) {\n                this._type_index = i;\n                break;\n            }\n        }\n\n        this._data = window.SKIN_CONFIG[this._type_index];\n        if (boo) {\n            let node = this.node.getChildByName('n_shape');\n            if (node) {\n                for (let i = 0; i < node.childrenCount; i++) {\n                    node.children[i].getComponent(cc.Sprite).spriteFrame = this.m_spa_blocklist.getSpriteFrame(this._data.name + this._colorindex);\n                }\n            }\n        }\n        return this._type_index;\n    },\n\n    //获取方块配置\n    getTheConfig() {\n        let a = 109.77249200050075;\n        let h = 110;\n        let height = 95;\n        let cos60 = Math.cos(60 * Math.PI / 180);\n        let sin60 = Math.sin(60 * Math.PI / 180);\n        let cos120 = Math.cos(120 * Math.PI / 180);\n        let sin120 = Math.sin(120 * Math.PI / 180);\n        let cos300 = Math.cos(300 * Math.PI / 180);\n        let sin300 = Math.sin(300 * Math.PI / 180);\n        let configLists = [\n            //一个\n            [cc.v2(0, 0)],\n            //四个\n            // [cc.v2(0, 0), cc.v2(cos60 * a, sin60 * a)],\n            // [cc.v2(0, 0), cc.v2(cos120 * a, sin120 * a)],\n            // [cc.v2(0, 0), cc.v2(h, 0), cc.v2(h * 2, 0)],\n            [cc.v2(0, 0), cc.v2(h, 0), cc.v2(h * 2, 0), cc.v2(h * 3, 0)], //横摆1 ----\n            [cc.v2(0, 0), cc.v2(h, 0), cc.v2(h * 2, 0), cc.v2(h + cos60 * a, sin60 * a)], //横摆2   --=-\n            [cc.v2(0, 0), cc.v2(h, 0), cc.v2(h * 2, 0), cc.v2(h + cos300 * a, sin300 * a)], //横摆3 --T-\n            [cc.v2(0, 0), cc.v2(h, 0), cc.v2(h * 2, 0), cc.v2(cos60 * a, sin60 * a)], //横摆4\n            [cc.v2(0, 0), cc.v2(h, 0), cc.v2(h * 2, 0), cc.v2(cos300 * a, sin300 * a)], //横摆5\n\n            [cc.v2(0, 0), cc.v2(cos60 * a, sin60 * a), cc.v2(cos60 * a * 2, sin60 * a * 2), cc.v2(cos120 * a, sin120 * a)], //斜上摆1\n            [cc.v2(0, 0), cc.v2(cos60 * a, sin60 * a), cc.v2(cos60 * a * 2, sin60 * a * 2), cc.v2(cos120 * a + cos60 * a, sin120 * a + sin60 * a)], //斜上摆2\n            [cc.v2(0, 0), cc.v2(cos60 * a, sin60 * a), cc.v2(cos60 * a * 2, sin60 * a * 2), cc.v2(h, 0)], //斜上摆3\n            [cc.v2(0, 0), cc.v2(cos60 * a, sin60 * a), cc.v2(cos60 * a * 2, sin60 * a * 2), cc.v2(cos60 * a + h, sin60 * a)], //斜上摆4\n            [cc.v2(0, 0), cc.v2(cos60 * a, sin60 * a), cc.v2(cos60 * a * 2, sin60 * a * 2), cc.v2(cos60 * a * 3, sin60 * a * 3)], //斜上直线\n\n            [cc.v2(0, 0), cc.v2(cos120 * a, sin120 * a), cc.v2(cos120 * a * 2, sin120 * a * 2), cc.v2(cos120 * a * 2 + h, sin120 * a * 2)], //斜下摆1\n            [cc.v2(0, 0), cc.v2(cos120 * a, sin120 * a), cc.v2(cos120 * a * 2, sin120 * a * 2), cc.v2(cos120 * a - h, sin120 * a)], //斜下摆2\n            [cc.v2(0, 0), cc.v2(cos120 * a, sin120 * a), cc.v2(cos120 * a * 2, sin120 * a * 2), cc.v2(cos120 * a + h, sin120 * a)], //斜下摆3\n            [cc.v2(0, 0), cc.v2(cos120 * a, sin120 * a), cc.v2(cos120 * a * 2, sin120 * a * 2), cc.v2(- h, 0)], //斜下摆4\n            [cc.v2(0, 0), cc.v2(cos120 * a, sin120 * a), cc.v2(cos120 * a * 2, sin120 * a * 2), cc.v2(cos120 * a * 3, sin120 * a * 3)], //斜下直线\n\n            [cc.v2(0, 0), cc.v2(cos60 * a, sin60 * a), cc.v2(cos60 * a + h, sin60 * a), cc.v2(2 * h, 0)], //拱桥1\n            [cc.v2(0, 0), cc.v2(cos300 * a, sin300 * a), cc.v2(cos300 * a + h, sin300 * a), cc.v2(2 * h, 0)], //拱桥2\n            [cc.v2(0, 0), cc.v2(cos120 * a, sin120 * a), cc.v2(0, 2 * height), cc.v2(h, 2 * height)], //拱桥3\n            [cc.v2(0, 0), cc.v2(cos60 * a, sin60 * a), cc.v2(0, 2 * height), cc.v2(-h, 2 * height)], //拱桥4\n            [cc.v2(0, 0), cc.v2(cos120 * a, sin120 * a), cc.v2(0, 2 * height), cc.v2(h, 0)], //拱桥5\n            [cc.v2(0, 0), cc.v2(cos60 * a, sin60 * a), cc.v2(0, 2 * height), cc.v2(-h, 0)], //拱桥6\n\n            [cc.v2(0, 0), cc.v2(cos120 * a, sin120 * a), cc.v2(0, 2 * height), cc.v2(cos300 * a, 2 * height + sin300 * a)], //四方四方\n            [cc.v2(0, 0), cc.v2(cos60 * a, sin60 * a), cc.v2(h, 0), cc.v2(cos60 * a + h, sin60 * a)],//斜四方/\n            [cc.v2(0, 0), cc.v2(cos120 * a, sin120 * a), cc.v2(-h, 0), cc.v2(cos120 * a - h, sin120 * a)],//斜四方\\\n        ]\n\n        return configLists\n    },\n\n    //创建单个六边形 colorIndex 颜色下标\n    newOneK: function (colorIndex) {\n        //创建一个块\n        let node = new cc.Node(\"colorSpr\")\n        node.colorIndex = colorIndex;\n        node.colorName = this._data.name;\n        let sprite = node.addComponent(cc.Sprite);\n        sprite.spriteFrame = this.m_spa_blocklist.getSpriteFrame(this._data.name + colorIndex);\n        return node\n    },\n\n    getCurColorIndex() {\n        return this._colorindex;\n    },\n\n    createItem(index) {\n        this._blockcount++;\n        if (this._blockcount >= 5) {\n            // index = 0;\n            this._next = 0;\n            this._blockcount = 0;\n        }\n        if (typeof (this._next) == 'number' && !index) {\n            index = this._next;\n            this._next = null;\n            if (index == 0) {\n                this._blockcount = 0;\n            }\n        }\n        let shapeitem = new cc.Node(\"n_shape\");\n        let config = this.getTheConfig();\n        let randomIndex = Utils.random(0, config.length);\n        if (typeof (index) == 'number' && index >= 0) {\n            randomIndex = index;\n        }\n\n        if (randomIndex == 0) {//碰到一也重置\n            this._blockcount = 0;\n        }\n        let posList = config[randomIndex];\n\n        let randomIndexColor = Utils.random(1, 5);\n        this._bg_color = colorlist[randomIndexColor];\n        this._colorindex = randomIndexColor;\n        let sumX = 0;\n        let countX = 0;\n        let sumY = 0;\n        let countY = 0;\n        for (let index = 0; index < posList.length; index++) {\n            let pos = posList[index]\n            let kuai = this.newOneK(randomIndexColor)\n\n            kuai.x = pos.x\n            sumX += kuai.x\n            countX++\n\n            kuai.y = pos.y\n            sumY += kuai.y\n            countY++\n            shapeitem.addChild(kuai)\n        }\n\n        shapeitem.setScale(scaleParam)\n        shapeitem.x = (-sumX / countX) * scaleParam\n        shapeitem.y = (-sumY / countY) * scaleParam\n\n        return shapeitem;\n    },\n\n    //添加触摸\n    addTouchEvent: function () {\n        let upH = 130\n        let self = this;\n\n        this.node.ox = this.node.x\n        this.node.oy = this.node.y\n\n        this.node.on(cc.Node.EventType.TOUCH_START, function () {\n            this.node.y += upH;\n            Utils.SetSoundEffect(window.BUTTON_CLICK_MUSIC, false, 0.8);\n            this.node.getChildByName(\"n_shape\").setScale(1)\n        }, this)\n        this.node.on(cc.Node.EventType.TOUCH_MOVE, function (event) {\n\n            let delta = event.touch.getDelta()\n            this.node.x += delta.x\n            this.node.y += delta.y\n            self.collisionFunc()\n\n            // //变色处理\n            if (!self.checkIsCanDrop()) {\n                self.changeColorDeal(true)\n            } else {\n                self.changeColorDeal()\n            }\n        }, this)\n\n        this.node.on(cc.Node.EventType.TOUCH_CANCEL, function (event) {\n            this.dropDownFunc()\n        }, this)\n        this.node.on(cc.Node.EventType.TOUCH_END, function (event) {\n            this.dropDownFunc()\n        }, this)\n\n    },\n\n    //检测是否能够放下\n    checkIsCanDrop: function () {\n        //先判断数量是否一致，不一致说明有一个超出去了\n        if (!this._checkFrameList || this._checkFrameList.length == 0 || this._checkFrameList.length != this.node.children[0].children.length) {\n            return false\n        }\n        //检测放下的格子是否已经有方块\n        for (var i = 0; i < this._checkFrameList.length; i++) {\n            if (this._checkFrameList[i].isHaveFK) {\n                return false\n            }\n        }\n        return true\n    },\n\n    //变色处理\n    changeColorDeal: function (isJustClearColor) {\n        let children = this.GameLayer.m_maparray\n        for (let i = 0; i < children.length; i++) {\n            children[i].getComponent(\"BlockBGItem\").setBrightVisible(false);\n        }\n\n        //如果参数有值，直接返回，不做下面的\n        if (isJustClearColor) {\n            return\n        }\n\n        for (let i = 0; i < this._checkFrameList.length; i++) {\n            this._checkFrameList[i].getComponent(\"BlockBGItem\").setBrightVisible(true, this._bg_color);\n        }\n    },\n\n    //碰撞逻辑\n    collisionFunc: function () {\n        this._checkFrameList = [] //清空数组\n        this._checkFKlist = [] //清空数组\n\n        let children = this.node.children[0].children\n        for (let i = 0; i < children.length; i++) {\n            let pianyiCPos = cc.v2(this.node.children[0].x, this.node.children[0].y).add(cc.v2(children[i].x, children[i].y))\n            let childPos = this.node.position.add(pianyiCPos);\n            let frame = this.checkPosFunc(childPos)\n\n            if (frame) {\n                this._checkFKlist.push(children[i])\n                this._checkFrameList.push(frame)\n            }\n        }\n    },\n\n    //一个点和棋盘的所有框检测\n    checkPosFunc: function (pos) {\n        let len = 52 //碰撞距离\n        let children = this.GameLayer.m_maparray\n        for (let i = 0; i < children.length; i++) {\n            let frameNode = children[i];\n            let dis = cc.v2(frameNode.x, frameNode.y).sub(pos).mag();\n            if (dis <= len) {\n                return frameNode\n            }\n        }\n    },\n\n    //放下逻辑\n    dropDownFunc: function () {\n        if (!this.checkIsCanDrop()) {\n            //放回去\n            this.takeBack()\n            return\n        }\n\n        for (var i = 0; i < this._checkFKlist.length; i++) {\n            this._checkFKlist[i].x = 0\n            this._checkFKlist[i].y = 0\n            this._checkFKlist[i].parent = this._checkFrameList[i]\n            this._checkFrameList[i].isHaveFK = true\n            this._checkFKlist[i].runAction(cc.sequence(cc.scaleTo(0.1, 1.1, 0.8), cc.scaleTo(0.15, 0.9, 1.1), cc.scaleTo(0.015, 1.1, 0.9), cc.scaleTo(0.2, 1, 1)));\n        }\n        this.GameLayer.hideGuide();\n\n        this.node.removeAllChildren()\n        var oneNode = this.createItem();\n        this.node.addChild(oneNode)\n        Utils.SetSoundEffect(window.BUTTON_CLICK_MUSIC, false, 0.8);\n        this.GameLayer.addScore(this._checkFKlist.length, true);\n        this.GameLayer.checkClearUp();\n\n        //放回去\n        this.takeBack()\n\n        //直接用棋盘检测是不是输了\n        this.GameLayer.checkIsLose()\n    },\n\n    //回到原位\n    takeBack: function () {\n        //变色处理\n        this.checkFrameList = [] //清空数组\n        this.changeColorDeal(true)\n\n        this.node.getChildByName(\"n_shape\").setScale(scaleParam)\n\n        this.node.x = this.node.ox\n        this.node.y = this.node.oy\n    },\n\n    checkIsLose: function () {\n        var canDropCount = 0\n        var children = this.node.children[0].children\n\n        //一个个格子放试一下能不能放\n        for (var i = 0; i < this.GameLayer.m_maparray.length; i++) {\n            var frameNode = this.GameLayer.m_maparray[i]\n            var srcPos = cc.v2(frameNode.x, frameNode.y)\n            var count = 1\n            if (!frameNode.isHaveFK) {\n                //这里做是否可以放的判断\n                for (var j = 1; j < children.length; j++) {\n                    var len = 52 //碰撞距离\n                    var childPos = srcPos.add(cc.v2(children[j].x, children[j].y));\n                    //碰撞检测\n                    for (var k = 0; k < this.GameLayer.m_maparray.length; k++) {\n                        var tFrameNode = this.GameLayer.m_maparray[k]\n                        var dis = cc.v2(tFrameNode.x, tFrameNode.y).sub(childPos).mag();\n                        if (dis <= len && !tFrameNode.isHaveFK) {\n                            count++ //可以放就要累加计数\n                        }\n                    }\n\n                }\n                //如果数量相等就说明这个方块在这个格子是可以放下的\n                if (count == children.length) {\n                    canDropCount++\n                }\n            }\n        }\n\n\n        if (canDropCount == 0) {\n            return true\n        } else {\n            return false\n        }\n    },\n\n\n    resetBlock(index) {\n        this.node.removeAllChildren();\n        this.updateIndex();\n        var oneNode = this.createItem(index);\n        this.node.addChild(oneNode);\n    },\n\n    setNextBlock(index) {\n        this._next = index;\n    }\n    // update (dt) {},\n});\n"]}