{"version":3,"sources":["assets/Script/item/GetBoxGiftItem.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import ShareSdk = require('../common/ShareSdk');\nimport Utils = require('../common/Utils');\nimport Common_CommonUtil from '../common/Common_CommonUtil';\nconst { ccclass, property } = cc._decorator;\ndeclare var window: any;\ndeclare var EVENT_LISTENER: any;\n@ccclass\nexport default class GetBoxGiftItem extends cc.Component {\n\n    @property(cc.Node)\n    m_n_freebtn: cc.Node = null;\n\n    @property(cc.Node)\n    m_n_sharebtn: cc.Node = null;\n\n    @property(cc.Node)\n    m_n_box: cc.Node = null;\n    private _onshowback: boolean = false;\n    private _callback: any = null;\n    start() {\n        EVENT_LISTENER.on(window.ON_SHOW_BACK, this.onshowback, this);\n    }\n\n    showView(callback) {\n        this._callback = callback;\n        this.m_n_freebtn.active = !window.BOX_SHARE;\n        this.m_n_sharebtn.active = window.BOX_SHARE;\n        this.m_n_box.runAction(cc.sequence(cc.repeat(cc.sequence(cc.rotateTo(0.1, -10), cc.rotateTo(0.1, 10)), 3), cc.rotateTo(0.1, 0)));\n    }\n\n    onDestroy() {\n        EVENT_LISTENER.off(window.ON_SHOW_BACK, this);\n    }\n\n    onshowback(time) {\n        if (this._onshowback) {\n            if (time >= window.SHARE_TIME) {\n                this.onFreeGet();\n            } else {\n                Common_CommonUtil.showShareFailTips();\n            }\n            this._onshowback = false;\n        }\n    }\n\n    onClose() {\n        if (this._callback) {\n            this._callback();\n            this._callback = null;\n        }\n        this.node.active = false;\n    }\n\n    onFreeGet() {\n        // Utils.showGetItem();\n        let numlist = [1, 20];\n        let index = 0;\n        let ran = Utils.random(0, 1500);\n        index = ran > 750 ? 0 : 1;\n        Utils.showGetItem(numlist[index], index, null, 0, 0);\n        if (index == 0) {\n            window.INIT_GAME_SAVE_DATA.tool[0] += numlist[index];\n        } else {\n            window.INIT_GAME_SAVE_DATA.gold_num += numlist[index];\n        }\n        if (window.GAME_CONTROL) {\n            window.GAME_CONTROL.BoxReward(index);\n        }\n        this.onClose();\n    }\n\n    onShareGet() {\n        this._onshowback = true;\n        ShareSdk.shareAppMessage({\n            title: \"我就看着你，直到你打开宝箱为止\",\n            imageUrl: window.tempFileURL[3],\n        });\n    }\n    // update (dt) {}\n}\n"]}