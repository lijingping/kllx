{"version":3,"sources":["assets/Script/GameStep.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\nimport Utils = require(\"./common/Utils\");\n\nconst { ccclass, property } = cc._decorator;\ndeclare var window: any;\n@ccclass\nexport default class GameStep extends cc.Component {\n\n    @property(cc.SpriteAtlas)\n    m_spa_list: cc.SpriteAtlas = null;\n\n\n    @property(cc.Node)\n    m_n_bigstepcontent: cc.Node = null;\n\n    @property(cc.Sprite)\n    m_sp_mystepicon: cc.Sprite = null;\n\n    @property(cc.Sprite)\n    m_sp_mystepname: cc.Sprite = null;\n\n    @property([cc.Node])\n    m_n_mystarlist: cc.Node[] = [];\n\n    @property(cc.Prefab)\n    m_pre_bigstep: cc.Prefab = null;\n\n    private m_nodepoll = null;\n    /**当前最后排名数 */\n\n\n\n\n    start() {\n\n        let len = window.STEP_CONFIG.length;\n        this.m_n_bigstepcontent.height = len * 115 + (len - 1) * 20;\n        let k = 0;\n        for (let i = len - 1; i >= 0; i--) {\n            let node = cc.instantiate(this.m_pre_bigstep);\n            node.x = 0;\n            node.y = -62 - (len - i - 1) * (node.height + 20);\n            this.m_n_bigstepcontent.addChild(node);\n            let data = window.STEP_CONFIG[i];\n            let index = k % 4;\n            node.getComponent(\"BigStepItem\").updateData(data, this.m_spa_list.getSpriteFrame(data.icon_path), this.m_spa_list.getSpriteFrame(data.desc_path), window.INIT_GAME_SAVE_DATA.top_level, index);\n            k++;\n        }\n        this.m_n_bigstepcontent.parent.parent.getComponent(cc.ScrollView).scrollToOffset(cc.v2(0, this.m_n_bigstepcontent.height));\n        this.initMyData();\n    }\n\n    private onToggleClick(event) {\n\n    }\n\n    initMyData() {\n        let curlv = window.INIT_GAME_SAVE_DATA.top_level;\n        let data = this.getMyStepData(curlv);\n        if (data) {\n            this.m_sp_mystepicon.spriteFrame = this.m_spa_list.getSpriteFrame(data.icon_path);\n            this.m_sp_mystepname.spriteFrame = this.m_spa_list.getSpriteFrame(data.desc_path);\n            for (let i = 0; i < this.m_n_mystarlist.length; i++) {\n                this.m_n_mystarlist[i].active = i < data.star;\n            }\n            // this.m_n_mybigstep.getComponent(\"BigStepItem\").updateData(data, this.m_spa_list.getSpriteFrame(data.icon_path), curlv);\n        } else {\n            this.m_sp_mystepicon.spriteFrame = this.m_spa_list.getSpriteFrame(\"stepicon6\");\n            this.m_sp_mystepname.spriteFrame = this.m_spa_list.getSpriteFrame(\"stepname6\");\n            for (let i = 0; i < this.m_n_mystarlist.length; i++) {\n                this.m_n_mystarlist[i].active = i <= 0;\n            }\n            // this.m_n_mybigstep.getComponent(\"BigStepItem\").updateData(window.STEP_CONFIG[0], this.m_spa_list.getSpriteFrame(\"stepicon1\"), curlv);\n        }\n    }\n\n\n    onBackHome() {\n        Utils.SetSoundEffect(window.BUTTON_CLICK_MUSIC, false, 1);\n        cc.director.loadScene(window.MENU_SCENE_NAME);\n    }\n\n    /**\n     * @description 根据等级获取我的段位数据\n     * @author 吴建奋\n     * @param {number} lv 等级\n     * @memberof GameStep\n     */\n    getMyStepData(lv: number) {\n        let index = Math.floor(lv / 10);\n        if (index <= 0) {\n            return null;\n        } else {\n            if (index > window.STEP_CONFIG.length)\n                index = window.STEP_CONFIG.length;\n            return window.STEP_CONFIG[index - 1];\n        }\n    }\n\n    onDestroy() {\n        if (this.m_nodepoll) {\n            this.m_nodepoll.clear();\n        }\n    }\n    // update (dt) {}\n}\n"]}