{"version":3,"sources":["assets/Script/common/PlatformCom.js"],"names":["cc","Class","Component","properties","onLoad","node","zindex","size","view","getVisibleSize","m_callbackobj","start","onImageBtnClick","wx","previewImage","urls","onSaveImageBtnClick","window","isWeChatPlatform","self","saveImageToPhotosAlbum","filePath","url","raw","success","res","showTipsView","fail","openSetting","authSetting","onCloseBtnClick","m_rqcode","active","hideTipsView","m_tips","getChildByName","getComponent","Label","string","text"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE,CACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlBQ,GAHP;AAwBL;AAEAC,EAAAA,MA1BK,oBA0BI;AACL,SAAKC,IAAL,CAAUC,MAAV,GAAmB,GAAnB,CADK,CACsB;;AAC3B,QAAIC,IAAI,GAAGP,EAAE,CAACQ,IAAH,CAAQC,cAAR,EAAX,CAFK,CAGL;AACA;;AACA,SAAKC,aAAL,GAAqB,IAArB;AACH,GAhCI;AAkCLC,EAAAA,KAlCK,mBAkCG,CAEP,CApCI;AAsCLC,EAAAA,eAtCK,6BAsCa;AACd;AACAC,IAAAA,EAAE,CAACC,YAAH,CAAgB;AACZC,MAAAA,IAAI,EAAC,CAAC,2EAAD;AADO,KAAhB;AAGH,GA3CI;AA6CLC,EAAAA,mBA7CK,iCA6CiB;AAClB,QAAIC,MAAM,CAACC,gBAAX,EAA6B;AACzB,UAAIC,IAAI,GAAG,IAAX;AACAN,MAAAA,EAAE,CAACO,sBAAH,CAA0B;AACtBC,QAAAA,QAAQ,EAAErB,EAAE,CAACsB,GAAH,CAAOC,GAAP,CAAW,sCAAX,CADY;AAEtBC,QAAAA,OAFsB,mBAEdC,GAFc,EAET;AACTN,UAAAA,IAAI,CAACO,YAAL,CAAkB,UAAlB;AACH,SAJqB;AAKtBC,QAAAA,IALsB,gBAKjBF,GALiB,EAKZ;AACNZ,UAAAA,EAAE,CAACe,WAAH,CAAe;AACXC,YAAAA,WAAW,EAAE,wBADF;AAEXL,YAAAA,OAFW,qBAED,CACN;AACH,aAJU;AAKXG,YAAAA,IALW,kBAKJ,CACH;AACH;AAPU,WAAf;AASH;AAfqB,OAA1B;AAiBH;AACJ,GAlEI;AAoELG,EAAAA,eApEK,6BAoEa;AACd,SAAKC,QAAL,CAAcC,MAAd,GAAuB,KAAvB;AACH,GAtEI;AAwELC,EAAAA,YAAY,EAAE,wBAAY;AACtB,SAAKC,MAAL,CAAYC,cAAZ,CAA2B,SAA3B,EAAsCC,YAAtC,CAAmDpC,EAAE,CAACqC,KAAtD,EAA6DC,MAA7D,GAAsE,EAAtE;AACA,SAAKJ,MAAL,CAAYF,MAAZ,GAAqB,KAArB;AACH,GA3EI;AA6ELN,EAAAA,YAAY,EAAE,sBAAUa,IAAV,EAAgB;AAC1B,SAAKL,MAAL,CAAYC,cAAZ,CAA2B,SAA3B,EAAsCC,YAAtC,CAAmDpC,EAAE,CAACqC,KAAtD,EAA6DC,MAA7D,GAAsEC,IAAtE;AACA,SAAKL,MAAL,CAAYF,MAAZ,GAAqB,IAArB;AACH,GAhFI,CAkFL;;AAlFK,CAAT","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n// var Utils = require(\"Utils\");\n// var ShareSdk = require(\"ShareSdk\");\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //     // ATTRIBUTES:\n        //     default: null,        // The default value will be used only when the component attaching\n        //                           // to a node for the first time\n        //     type: cc.SpriteFrame, // optional, default is typeof default\n        //     serializable: true,   // optional, default is true\n        // },\n        // bar: {\n        //     get () {\n        //         return this._bar;\n        //     },\n        //     set (value) {\n        //         this._bar = value;\n        //     }\n        // },\n        // m_rqcode: cc.Node,\n        // m_maskbg: cc.Node,\n        // m_tips: cc.Node,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad() {\n        this.node.zindex = 100;    //设置z轴的位置\n        var size = cc.view.getVisibleSize()\n        // this.m_maskbg.width = size.width;\n        // this.m_maskbg.height = size.height;\n        this.m_callbackobj = null;\n    },\n\n    start() {\n\n    },\n\n    onImageBtnClick() {\n        // this.m_rqcode.active = !this.m_rqcode.active;\n        wx.previewImage({\n            urls:['https://h5game.gametall.com/chatgame/cocos_games_res/images/codeImage.jpg'],\n        })\n    },\n\n    onSaveImageBtnClick() {\n        if (window.isWeChatPlatform) {\n            var self = this;\n            wx.saveImageToPhotosAlbum({\n                filePath: cc.url.raw('resources/common/saveImage.d2e1c.jpg'),\n                success(res) {\n                    self.showTipsView(\"二维码已保存成功\")\n                },\n                fail(res) {\n                    wx.openSetting({\n                        authSetting: 'scope.writePhotosAlbum',\n                        success() {\n                            // console.log(\"======openSetting success=============\");\n                        },\n                        fail() {\n                            // console.log(\"======openSetting fail=============\");\n                        }\n                    });\n                }\n            });\n        }\n    },\n\n    onCloseBtnClick() {\n        this.m_rqcode.active = false;\n    },\n\n    hideTipsView: function () {\n        this.m_tips.getChildByName(\"TipsTex\").getComponent(cc.Label).string = '';\n        this.m_tips.active = false;\n    },\n\n    showTipsView: function (text) {\n        this.m_tips.getChildByName(\"TipsTex\").getComponent(cc.Label).string = text;\n        this.m_tips.active = true;\n    },\n\n    // update (dt) {},\n});\n"]}