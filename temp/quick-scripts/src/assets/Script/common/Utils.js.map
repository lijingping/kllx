{"version":3,"sources":["assets/Script/common/Utils.js"],"names":["t","console","log","Utils","setDesignResolution","canvas","cc","find","getComponent","Canvas","winSize","width","height","fitWidth","fitHeight","setKVUserData","key","value","success","fail","window","GAME_SAVE_TYPE","sys","localStorage","setItem","Data","setData","getKVUserData","getItem","getData","loadRes","imagUrl","type","callback","loader","err","obj","error","message","fadeIn","node","time","fadetime","opacity","runAction","getSaveData","data","GAME_SAVE_HANDLER","INIT_GAME_SAVE_DATA","JSON","parse","stringify","DB","wx","cloud","database","config","env","ENV","collection","doc","userInfo","openId","get","res","skin","SKIN_CONFIG_STATE","need_add","complete","setSaveData","_id","add","update","gold_num","login_time","tool","top_level","top_score","random","min","max","Math","floor","getAngle","x1","y1","x2","y2","x","abs","y","z","sqrt","pow","cos","radina","acos","angle","PI","getRandomSDiff","n","originalArray","Array","len","i","randomArray","temp","showGetItem","num","parentNode","Prefab","instantiate","zindex","labelnode","getChildByName","goldnode","boomnode","Label","string","js","formatStr","active","xx","yy","isValid","parent","setPosition","movetime","dis","action1","moveBy","v2","action2","fadeOut","sequence","callFunc","destroy","showTipsText","text","font_size","color","ydis","Node","label","addComponent","fontFamily","fontSize","lineHeight","Color","WHITE","showHurtText","boo","dir","movex","jumpBy","moveIcon","sprite_name","startpos","targetpos","runtime","spritenode","Sprite","spriteFrame","anchorY","position","delayTime","moveTo","easing","easeIn","SetSoundEffect","musicUrl","volum","voluem","MUSIC_SHOW_OFF","AudioClip","clip","bgmAudioID","audioEngine","playEffect","playBgmMusic","resumBgmMusic","url","BGM","voice","resume","setTimeout","playMusic","stopBgmMusic","pause","warn","formatSecToTime","s","hour","sec","getMin","a","b","getMax","getMiddleIndex","ceil","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["import Data from '../dataStatistics/Data';\n\n/**\n * 命名 node = n_  label = l_  sprite = sp_ button = btn_   scrollView = sc_\n */\nlet t = console.log;\nconsole.log = function (...param) {\n    // t(...param);\n}\nvar Utils = {\n\n    //适配分辨率默认高度适配，iphonex宽度适配\n    setDesignResolution: function () {\n        var canvas = cc.find(\"Canvas\").getComponent(cc.Canvas);\n        let winSize = cc.winSize\n        if (winSize.width / winSize.height > 9 / 16) {\n            canvas.fitWidth = false;\n            canvas.fitHeight = true;\n        } else {\n            canvas.fitWidth = true;\n            canvas.fitHeight = false;\n        }\n    },\n\n    /**\n     * \n     * @param {String} key 保存的键值\n     * @param {String} value  保存的值\n     */\n    setKVUserData(key, value, success, fail) {\n        if (window.GAME_SAVE_TYPE === 1) {\n            cc.sys.localStorage.setItem(key, value);\n        }\n        else {\n            Data.setData(value, success, fail);\n        }\n    },\n\n    /**\n     * \n     * @param {String} key 获取对应内容的键值\n     * @param {String} callback 存储服务端的话需要回调函数\n     */\n    getKVUserData(key, success, fail) {\n        if (window.GAME_SAVE_TYPE === 1) {\n            return cc.sys.localStorage.getItem(key);\n        } else {\n            Data.getData(success, fail);\n        }\n    },\n\n    /**\n     * \n     * @param {String} imagUrl 相对rescourse下的路径\n     * @param {Number} type 加载资源类型\n     * @param {*} callback 加载之后回调\n     */\n    loadRes(imagUrl, type, callback) {\n        cc.loader.loadRes(imagUrl, type, function (err, obj) {\n            if (err) {\n                cc.error(err.message || err);\n                return;\n            }\n            typeof (callback) == 'function' && callback(obj);\n        });\n    },\n\n\n    /**\n     * \n     * @param {*} node 淡入节点\n     * @param {Number} time 淡入时间 默认1s\n     */\n    fadeIn(node, time) {\n        let fadetime = time ? time : 1\n        node.opacity = 0;\n        node.runAction(cc.fadeIn(fadetime));\n    },\n\n    /**\n     * 获取上传服务器的存储信息\n     */\n    getSaveData(callback) {\n        if (window.GAME_SAVE_TYPE === 1) {\n            let data = cc.sys.localStorage.getItem(window.GAME_SAVE_HANDLER);\n            if (data) {\n                window.INIT_GAME_SAVE_DATA = JSON.parse(data);\n            }\n            else {\n                cc.sys.localStorage.setItem(window.GAME_SAVE_HANDLER, JSON.stringify(window.INIT_GAME_SAVE_DATA));\n                data = window.INIT_GAME_SAVE_DATA;\n            }\n            if(callback){\n                callback(data);\n            }\n        }\n        else {\n\n            const DB = wx.cloud.database({\n                config: {\n                    env: window.ENV,\n                }\n            })\n            DB.collection(\"todos\").doc(window.userInfo.openId).get({\n                success: res => {\n                    console.log(res.data);\n                    if (!res.data.skin) res.data.skin = window.SKIN_CONFIG_STATE;\n                    window.INIT_GAME_SAVE_DATA = res.data;\n                    if (callback) {\n                        callback(window.INIT_GAME_SAVE_DATA);\n                    }\n                },\n                fail: (err) => {\n                    console.log(\"fail\", err);\n                    window.need_add = true;\n                    if (callback) {\n                        callback(window.INIT_GAME_SAVE_DATA);\n                    }\n                },\n                complete: (res) => {\n                    // console.log(\"complete\", err);\n                }\n            });\n        }\n    },\n\n    /**\n     * \n     * @param {String} jsonobj 存储信息解析\n     */\n    setSaveData() {\n        if (window.GAME_SAVE_TYPE === 1) {\n            // console.log(\"本地数据设置成功\", JSON.stringify(window.INIT_GAME_SAVE_DATA));\n            cc.sys.localStorage.setItem(window.GAME_SAVE_HANDLER, JSON.stringify(window.INIT_GAME_SAVE_DATA));\n        } else {\n            const DB = wx.cloud.database({\n                config: {\n                    env: window.ENV,\n                }\n            });\n            window.INIT_GAME_SAVE_DATA._id = window.userInfo.openId;\n            if (window.need_add) {\n                DB.collection(\"todos\").add({\n                    data: window.INIT_GAME_SAVE_DATA,\n                    success: (res) => {\n                        // console.log(res, \"add data good\");\n                        window.need_add = false;\n                    },\n                    fail: (err) => {\n                        // console.log(\"fail \", err);\n                    }\n                })\n            } else {\n                DB.collection(\"todos\").doc(window.userInfo.openId).update({\n                    data: {\n                        gold_num: window.INIT_GAME_SAVE_DATA.gold_num,\n                        login_time: window.INIT_GAME_SAVE_DATA.login_time,\n                        tool: window.INIT_GAME_SAVE_DATA.tool,\n                        top_level: window.INIT_GAME_SAVE_DATA.top_level,\n                        top_score: window.INIT_GAME_SAVE_DATA.top_score,\n                        skin: window.INIT_GAME_SAVE_DATA.skin,\n                    },\n                    success: (res) => {\n                        // console.log(res, \"add data good\");\n                    },\n                    fail: (err) => {\n                        // console.log(\"fail \", err);\n                    }\n                })\n            }\n        }\n    },\n\n    /**\n     * @param {Number}min max随机数范围\n     */\n    random(min, max) {\n        return min + Math.floor(Math.random() * (max - min));\n    },\n\n    /**\n     * 获取两个点的夹角\n     */\n    getAngle(x1, y1, x2, y2) {\n        // 直角的边长\n        var x = Math.abs(x1 - x2);\n        var y = Math.abs(y1 - y2);\n        // 斜边长\n        var z = Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2));\n        // 余弦\n        var cos = y / z;\n        // 弧度\n        var radina = Math.acos(cos);\n        // 角度\n        var angle = 180 / (Math.PI / radina);\n        return angle;\n    },\n\n    /**\n     * @desc 从给定整数范围内生成n个不重复的随机数 n不能超过给定范围\n     * @param {Number} min \n     * @param {Number} max \n     */\n    getRandomSDiff(min, max, n) {\n        if (max - min + 1 < n) return [];\n        var originalArray = new Array;\n        var len = max - min + 1;\n        for (let i = 0; i < len; i++) {\n            originalArray[i] = min + i;\n        }\n        var randomArray = new Array;\n        for (let i = 0; i < n; i++) {\n            let t = this.random(0, len - 1 - i)\n            randomArray[i] = originalArray[t];\n            var temp = originalArray[len - 1 - i];\n            originalArray[len - 1 - i] = originalArray[t];\n            originalArray[t] = temp;\n        }\n        return randomArray;\n    },\n\n    /**\n     * 显示道具获得\n     * @param {Number} num \n     * @param {Number} type 0 炸弹 1金币\n     * @param {any} parentNode \n     * @param {Number} x \n     * @param {Number} y \n     */\n    showGetItem(num, type, parentNode, x, y) {\n        this.loadRes(\"prefabs/textbg\", cc.Prefab, (obj) => {\n            var node = cc.instantiate(obj);\n            node.zindex = 1000;\n            let labelnode = node.getChildByName('l_num');\n            let goldnode = node.getChildByName('sp_gold');\n            let boomnode = node.getChildByName('sp_boom');\n            if (type == 0) {\n                labelnode.getComponent(cc.Label).string = cc.js.formatStr(\"终极轰炸x%d\", num);\n                goldnode.active = false;\n                boomnode.active = true;\n            } else {\n                labelnode.getComponent(cc.Label).string = cc.js.formatStr(\"金币x%d\", num);\n                goldnode.active = true;\n                boomnode.active = false;\n            }\n            let xx = x ? x : 0;\n            let yy = y ? y : 0;\n\n            if (parentNode && cc.isValid(parentNode)) {\n                node.parent = parentNode;\n            }\n            else {\n                node.parent = cc.find(\"Canvas\");\n            }\n            node.setPosition(xx, yy);\n            let movetime = 1.5;\n            let dis = 70;\n            node.setPosition(xx, yy);\n            var action1 = cc.moveBy(movetime, cc.v2(0, dis))\n            var action2 = cc.fadeOut(1)\n            node.runAction(cc.sequence(action1, action2, cc.callFunc(() => {\n                node.destroy();\n            })));\n        })\n    },\n\n    /**\n     * \n     * @param {String} text 文字描述\n     * @param {*} parentNode 父节点，默认cc.find(\"Canvas\")\n     * @param {Number} x *坐标x默认0\n     * @param {Number} y *坐标y默认0\n     * @param {Number} font_size*字体大小默认40\n     * @param {*} color 字体颜色\n     * @param {Number} time 飘字移动时间\n     * @param {Number} ydis 移动距离\n     */\n    showTipsText(text, parentNode, x, y, font_size, color, time, ydis) {\n        var node = new cc.Node('tipstext');\n        node.zindex = 1000;\n        var label = node.addComponent(cc.Label);\n        label.fontFamily = '黑体';\n        label.string = text;\n        let xx = x ? x : 0;\n        let yy = y ? y : 0;\n        label.fontSize = font_size ? font_size : 40;\n        label.lineHeight = font_size ? font_size + 10 : 50;\n        node.color = color ? color : cc.Color.WHITE;\n        if (parentNode && cc.isValid(parentNode)) {\n            node.parent = parentNode;\n        }\n        else {\n            node.parent = cc.find(\"Canvas\");\n        }\n        let movetime = time ? time : 0.5;\n        let dis = ydis ? ydis : 70;\n        node.setPosition(xx, yy);\n        var action1 = cc.moveBy(movetime, cc.v2(0, dis))\n        var action2 = cc.fadeOut(1)\n        node.runAction(cc.sequence(action1, action2, cc.callFunc(() => {\n            node.destroy();\n        })));\n    },\n\n\n    /**\n     * \n     * @param {String} text 文字描述\n     * @param {*} parentNode 父节点，默认cc.find(\"Canvas\")\n     * @param {Number} x *坐标x默认0\n     * @param {Number} y *坐标y默认0\n     * @param {Number} font_size*字体大小默认40\n     * @param {*} color 字体颜色\n     * @param {Number} time 飘字移动时间\n     * @param {Number} ydis 移动距离\n     * @param {boolean} boo 是否不需要跳跃效果\n     */\n    showHurtText(text, parentNode, x, y, font_size, color, time, ydis, boo) {\n        this.loadRes(\"prefabs/l_hurt\", cc.Prefab, (obj) => {\n            var node = cc.instantiate(obj);\n            node.zindex = 1000;\n            let label = node.getComponent(cc.Label);\n            label.string = text;\n            let xx = x ? x : 0;\n            let yy = y ? y : 0;\n            label.fontSize = font_size ? font_size : 40;\n            label.lineHeight = 80;//font_size ? font_size + 10 : 40;\n            node.color = color ? color : cc.Color.WHITE;\n            if (parentNode && cc.isValid(parentNode)) {\n                node.parent = parentNode;\n            }\n            else {\n                node.parent = cc.find(\"Canvas\");\n            }\n            let movetime = time ? time : 0.5;\n            let dis = ydis ? ydis : 1;\n            node.setPosition(xx, yy);\n            this.dir = !this.dir;\n            let movex = this.dir ? -1 : 1;\n            if (boo) dis = 0;\n            var action1 = cc.jumpBy(movetime, dis * 100 * movex, -30, 100, 1);\n            var action2 = cc.fadeOut(0.8);\n            node.runAction(cc.sequence(action1, action2, cc.callFunc(() => {\n                node.destroy();\n                node = null;\n            })));\n        })\n\n    },\n\n    /**\n     *          \n     * @param {string} sprite_name 资源路径\n     * @param {*} parentNode 父节点 默认canvas\n     * @param {Vec2} startpos 开始位置\n     * @param {Vec2} targetpos 结束位置\n     * @param {function} callback 回调\n     * @param {Number} time 时间\n     * @param {*} type 类型，是否需要添加一个jump\n     */\n    moveIcon(sprite_name, parentNode, startpos, targetpos, callback, time, type) {\n        let runtime = time ? time : 1;\n        // this.loadRes(sprite_name, cc.SpriteFrame, (sprite) => {\n        var node = new cc.Node('iconmove');\n        var spritenode = node.addComponent(cc.Sprite);\n        spritenode.spriteFrame = sprite_name;\n        if (parentNode && cc.isValid(parentNode)) {\n            node.parent = parentNode;\n        }\n        else {\n            node.parent = cc.find(\"Canvas\");\n        }\n        let dir = Utils.random(0, 1000);\n        node.anchorY = 0;\n        node.position = startpos;\n        node.zindex = 1000;\n        if (type && type > 0) {\n            if (dir > 500) {\n                type = -1 * type;\n            }\n            node.runAction(cc.sequence(cc.jumpBy(0.5, type, 0, 100, 1), cc.delayTime(0.5), cc.moveTo(runtime, targetpos).easing(cc.easeIn(3.0)), cc.callFunc(() => {\n                if (callback)\n                    callback();\n                node.destroy();\n            })));\n        } else {\n            node.runAction(cc.sequence(cc.moveTo(runtime, targetpos).easing(cc.easeIn(3.0)), cc.callFunc(() => {\n                if (callback)\n                    callback();\n                node.destroy();\n            })));\n        }\n\n        // })\n    },\n\n\n    /**\n     * 添加音效\n     * @param musicUrl 音效路径\n     * @constructor\n     */\n    SetSoundEffect(musicUrl, boo, volum) {\n        let voluem = volum ? volum : 1;\n        if (window.MUSIC_SHOW_OFF) {\n            cc.loader.loadRes(musicUrl, cc.AudioClip,(err,clip)=>{\n                window.bgmAudioID = cc.audioEngine.playEffect(clip, false);\n            })\n            // var audioUrl = cc.url.raw(\"resources/\" + musicUrl);\n            // cc.audioEngine.play(audioUrl, boo, voluem);\n        }\n    },\n\n    //播放背景音乐\n    playBgmMusic(musicUrl, volum) {\n        this.resumBgmMusic(musicUrl, volum);\n    },\n\n    resumBgmMusic(musicUrl, volum) {\n        let url = musicUrl ? musicUrl : window.BGM;\n        let voice = volum ? volum : 0.8;\n        try {\n            if (window.MUSIC_SHOW_OFF) {\n                if (window.bgmAudioID >= 0) {\n                    cc.audioEngine.resume(window.bgmAudioID);\n                }\n                // window.bgmAudioID = -1;\n                else {\n                    setTimeout(() => {\n                        // var audioUrl = cc.url.raw(\"resources/\" + url);\n                        cc.loader.loadRes(url, cc.AudioClip, (err, clip) => {\n                            window.bgmAudioID = cc.audioEngine.playMusic(clip, true);\n                        })\n\n                        // console.error(\"window.bgmAudioID\", window.bgmAudioID);\n                    }, 500);\n                }\n            }\n        } catch (error) {\n            console.error(error);\n            setTimeout(() => {\n                cc.loader.loadRes(url, cc.AudioClip, (err, clip) => {\n                    window.bgmAudioID = cc.audioEngine.playMusic(clip, true);\n                })\n                // console.error(\"window.bgmAudioID\", window.bgmAudioID);\n            }, 500);\n        }\n\n    },\n\n    //停止背景音乐\n    stopBgmMusic() {\n        try {\n            if (typeof (window.bgmAudioID) != 'undefined') {\n                cc.audioEngine.pause(window.bgmAudioID)\n                // window.bgmAudioID = -1;\n            }\n        } catch (error) {\n            console.warn(error);\n        }\n    },\n\n    //格式化秒数\n    /**\n     * \n     * @param {Number} sec 秒数\n     */\n    formatSecToTime(s) {\n        var t;\n        if (s > -1) {\n            var hour = Math.floor(s / 3600);\n            var min = Math.floor(s / 60) % 60;\n            var sec = s % 60;\n            if (hour < 10) {\n                t = '0' + hour + \":\";\n            } else {\n                t = hour + \":\";\n            }\n\n            if (min < 10) { t += \"0\"; }\n            t += min + \":\";\n            if (sec < 10) { t += \"0\"; }\n            t += sec;\n        }\n        return t;\n    },\n\n    getMin(a, b) {\n        let min = a > b ? b : a;\n        return min;\n    },\n\n    getMax(x, i) {\n        let max = x > i ? x : i;\n        return max;\n    },\n\n    //type:type为1的时候更倾向于大这边\n    getMiddleIndex(min, max, type) {\n        let len = max - min;\n        if (len % 2 == 0) {\n            return len / 2 + min;\n        } else {\n            if (type) {\n                return Math.ceil(len / 2) + min;\n            } else {\n                return Math.floor(len / 2) + min;\n            }\n        }\n    },\n};\n\nmodule.exports = Utils;"]}