{"version":3,"sources":["assets/Script/newBie/NewBieGift.js"],"names":["Utils","require","ShareSdk","GetTimeString","data","Date","time","getFullYear","getMonth","getDate","arr","split","cc","Class","Component","properties","m_n_newpanel","Node","m_n_newpanel_success","m_btn_getreward","Button","m_l_desc","Label","start","active","EVENT_LISTENER","on","window","ON_SHOW_BACK","onshowback","updateData","onEnable","onDisable","onDestroy","off","_onshowback","autoShowRewardPage","state","getState","firststart","onBtnNewBieClick","getTime","INIT_GAME_SAVE_DATA","login_time","getArr","temp","curTime","curArr","judgeTime","t_a1","t_a2","parseInt","res","string","node","SetSoundEffect","BUTTON_CLICK_MUSIC","onBackBtnClick","onRewardBackBtnClick","onBtnGetRewardClick","tool","gold_num","GAME_MENU","updateGold","onShareBtnClick","self","shareAppMessage","title","imageUrl","tempFileURL","success","m_n_sharenode","fail","err","complate","msg"],"mappings":"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","sourceRoot":"/","sourcesContent":["var Utils = require(\"Utils\");\nvar ShareSdk = require(\"ShareSdk\");\nvar GetTimeString = function () {\n    var data = new Date()\n    var time = data.getFullYear() + \"/\" + (data.getMonth() + 1) + \"/\" + data.getDate();\n    // var time = data.toLocaleDateString();\n    let arr = time.split(\"/\");\n    return [time, arr];\n};\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        m_n_newpanel: cc.Node,\n        m_n_newpanel_success: cc.Node,\n        m_btn_getreward: cc.Button,\n        m_l_desc: cc.Label,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {},\n\n    start() {\n        this.m_n_newpanel.active = false;\n        this.m_n_newpanel_success.active = false;\n        // EVENT_LISTENER.on(window.GAME_SAVE_HANDLER, this.updateData, this);\n        EVENT_LISTENER.on(window.ON_SHOW_BACK, this.onshowback, this);\n        this.updateData();\n    },\n\n    // update (dt) {},\n    onEnable() {\n\n    },\n\n    onDisable: function () {\n\n    },\n\n    onDestroy() {\n        // EVENT_LISTENER.off(window.GAME_SAVE_HANDLER, this);\n        EVENT_LISTENER.off(window.ON_SHOW_BACK, this);\n    },\n\n    onshowback(time) {\n        if (this._onshowback) {\n            this._onshowback = false;\n            if (this.m_n_newpanel_success.active) {\n                this.m_n_newpanel_success.active = false;\n            }\n        }\n    },\n\n    autoShowRewardPage() {\n        // 上次领取的时间\n        var state = this.getState();\n        if (state == 1) {\n            if (!window.firststart) {\n                this.onBtnNewBieClick();\n                window.firststart = true;\n            }\n        }\n    },\n\n    getState() {\n        var state = 1;\n\n        var getTime = window.INIT_GAME_SAVE_DATA.login_time;\n        // console.log(\"getstate\",getTime)\n        if (getTime && getTime != 'null' && getTime != '') {\n            var getArr = getTime.split(\"/\");\n            var temp = GetTimeString();\n            var curTime = temp[0], curArr = temp[1]\n            // console.log(getArr, temp[1])\n            state = this.judgeTime(getArr, curArr)\n        }\n        return state;\n    },\n\n    judgeTime: function (t_a1, t_a2) {\n        if (parseInt(t_a1[0]) < parseInt(t_a2[0]))\n            return 1\n        if (parseInt(t_a1[0]) > parseInt(t_a2[0]))\n            return -1\n        if (parseInt(t_a1[1]) < parseInt(t_a2[1]))\n            return 1\n        if (parseInt(t_a1[1]) > parseInt(t_a2[1]))\n            return -1\n        let res = 0\n        if (parseInt(t_a1[2]) < parseInt(t_a2[2]))\n            res = 1\n        else if (parseInt(t_a1[2]) > parseInt(t_a2[2]))\n            res = -1\n        return res\n    },\n\n    updateData() {\n        // let state = window.INIT_GAME_SAVE_DATA.award_list % 10;\n        // let tt = this.m_btn_getreward.node.getChildByName(\"l_newbconfirm\");\n        this.autoShowRewardPage();\n        let state = this.getState();\n        if (state == 1) {\n            // this.m_btn_getreward.interactable = true;\n            this.m_l_desc.string = \"每天可领一次\";\n        } else {\n            // this.m_btn_getreward.interactable = false;\n            this.m_l_desc.string = \"每天可领一次(已领取)\";\n        }\n        this.m_btn_getreward.node.active = (state == 1);\n    },\n\n    onBtnNewBieClick() {\n        Utils.SetSoundEffect(window.BUTTON_CLICK_MUSIC, false, 1);\n        this.m_n_newpanel.active = true;\n        // let tt = this.m_btn_getreward.node.getChildByName(\"l_newbconfirm\");\n        let state = this.getState();\n        if (state == 1) {\n            // this.m_btn_getreward.interactable = true;\n            this.m_l_desc.string = \"每天可领一次\";\n        } else {\n            // this.m_btn_getreward.interactable = false;\n            this.m_l_desc.string = \"每天可领一次(已领取)\";\n        }\n\n        this.m_btn_getreward.node.active = (state == 1);\n    },\n\n    onBackBtnClick() {\n        Utils.SetSoundEffect(window.BUTTON_CLICK_MUSIC, false, 1);\n        this.m_n_newpanel.active = false;\n        this.m_n_newpanel_success.active = false;\n    },\n\n    onRewardBackBtnClick() {\n        Utils.SetSoundEffect(window.BUTTON_CLICK_MUSIC, false, 1);\n        this.m_n_newpanel.active = false;\n        this.m_n_newpanel_success.active = false;\n    },\n\n    onBtnGetRewardClick() {\n        Utils.SetSoundEffect(window.BUTTON_CLICK_MUSIC, false, 1);\n        this.m_n_newpanel.active = false;\n        this.m_n_newpanel_success.active = true;\n        var temp = GetTimeString();\n        var curTime = temp[0];\n        this._onshowback = true;\n        window.INIT_GAME_SAVE_DATA.login_time = curTime;\n\n        window.INIT_GAME_SAVE_DATA.tool[0] += 1;\n        window.INIT_GAME_SAVE_DATA.gold_num += 10;\n\n        this.updateData();\n        if (window.GAME_MENU)\n            window.GAME_MENU.updateGold();\n    },\n\n    onShareBtnClick() {\n        Utils.SetSoundEffect(window.BUTTON_CLICK_MUSIC, false, 1);\n        let self = this;\n        ShareSdk.shareAppMessage({\n            title: \"炸弹，金币每天领，快来领取吧\",\n            imageUrl: window.tempFileURL[0],\n            success: res => {\n                // cc.director.loadScene(window.GAME_SCENE_NAME);\n                self.m_n_sharenode.active = true;\n            },\n            fail: err => {\n\n            },\n            complate: msg => {\n\n            },\n        });\n    },\n});\n"]}